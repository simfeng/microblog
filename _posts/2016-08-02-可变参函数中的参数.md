---
layout: post
title: "可变参函数中的参数"
date: 2016-08-02 15:23:13
image: '/assets/img/'
description: "*args  **kwargs的使用问题"
main-class: "python"
color:
tags:
- python
- args
- kwargs
- \*
categories:
twitter_text:
introduction: "*args  **kwargs的使用问题"
---

### 可变参函数中的参数

```
In [93]: def testargs(a, b=None, *args, **kwargs):
   ....:     print 'a=',a
   ....:     print 'b=',b
   ....:     print 'args=',args
   ....:     print 'kwargs=',kwargs
   ....:
```

上述这个函数中，四种类型的位置不能变

1. a: 必填参数
2. b: 选填参数
3. *args: 元组参数
4. **kwargs: 关键字参数(key-word)

两点需要特别注意的地方：


#### 1. `*`的用法

先说不使用`*`的情况

```
In [120]: testargs(1,2,3,4,5, t=6)
a= 1
b= 2
args= (3, 4, 5)
kwargs= {'t': 6}
```

`*`可将dict, list, string, set转换成tuple，

> **argument after * must be a sequence, not int**

同样效果的语句

```
In [127]: testargs(1,2,*(3,4,5), t=6) # tuple
In [128]: testargs(1,2,*[3,4,5], t=6) # list
In [129]: testargs(1,2,*{3,4,5}, t=6) # set(集合)
In [130]: testargs(1,2,*{3:'a',4:'b',5:'c'}, t=6) # dict key
a= 1
b= 2
args= (3, 4, 5)
kwargs= {'t': 6}
```
上面四条语句实际执行时都是

    testargs(1,2,3,4,5, t=6)

这样一条语句，也就是说`*`将紧随其后的参数拆成单个的参数传入函数中。    
OK, 如果我们执行这么一条语句

    testargs(1,*(3,4,5), t=6)

函数实际接收的参数应该是 `testargs(1,3,4,5, t=6)`, 实际执行的结果，不出所料的

```
In [131]: testargs(1,*(3,4,5), t=6)
a= 1
b= 3
args= (4, 5)
kwargs= {'t': 6}
```

上个例子中，如果我们不用`*`呢？

```
In [138]: testargs(1,(3,4,5), t=6)
a= 1
b= (3, 4, 5)
args= ()
kwargs= {'t': 6}
```

是不是和你想的一样。

**`*`号的作用就是将参数铺开，并不针对任何参数名称。**

#### 2. 关键字参数存在时，必填参数和选填参数不要使用参数名称赋值

还是使用函数`testargs()`, 中间包含一个选填参数`b`.如果我们尝试采用`b=2`的方式传递参数，则会：

```
In [140]: testargs(1,b=2,3,4,5, t=6)
  File "<ipython-input-140-2f01ee711656>", line 1
    testargs(1,b=2,3,4,5, t=6)
SyntaxError: non-keyword arg after keyword arg
```

`a=1`会出现同样的错误

```
In [141]: testargs(a=1,2,3,4,5, t=6)
  File "<ipython-input-141-40dabd3ebfee>", line 1
    testargs(a=1,2,3,4,5, t=6)
SyntaxError: non-keyword arg after keyword arg
```

当赋值语句出现在参数列表中时，函数会认为这是关键字参数，而关键字参数的位置是在所有参数的最后，如果赋值语句之后还有非赋值语句的参数（也就是非关键字参数），系统就会报错.

这里不是针对关键字参数的特列，而是一个普遍的情况。__赋值语句之后不要再出现其他非赋值语句的参数__

```
In [149]: def a(a,b):
   .....:     print a,b
   .....:

In [150]: a(a=1,2)
  File "<ipython-input-150-64e5ac0b0459>", line 1
    a(a=1,2)
SyntaxError: non-keyword arg after keyword arg

```
